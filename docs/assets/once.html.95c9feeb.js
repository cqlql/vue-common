import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,a as e}from"./app.310c3817.js";const t={},c=e(`<h2 id="onceexecute-\u666E\u901A\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#onceexecute-\u666E\u901A\u51FD\u6570" aria-hidden="true">#</a> OnceExecute - \u666E\u901A\u51FD\u6570</h2><p>\u4EC5\u4EC5\u53EA\u6267\u884C\u4E00\u6B21\u666E\u901A\u51FD\u6570\uFF0C\u91CD\u590D\u6267\u884C\u5C06\u4E0D\u518D\u6267\u884C\u6B64\u51FD\u6570\u3002\u53EF\u8FDB\u884C clear \u6062\u590D\u521D\u59CB\u72B6\u6001</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> OnceExecute <span class="token keyword">from</span> <span class="token string">&#39;@/utils/once-execute&#39;</span>
<span class="token keyword">const</span> onceExecute <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OnceExecute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6B64\u5904\u53EA\u4F1A\u6267\u884C\u4E00\u6B21</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// \u91CD\u590D\u8C03\u7528\u4E0D\u518D\u6267\u884C</span>
onceExecute<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// \u6E05\u7406\u6062\u590D\u521D\u59CB</span>
onceExecute<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="oncepromise-promise-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#oncepromise-promise-\u51FD\u6570" aria-hidden="true">#</a> OncePromise - Promise \u51FD\u6570</h2><ul><li>\u4EC5\u4EC5\u53EA\u6267\u884C\u4E00\u6B21 Promise\uFF0C\u91CD\u590D\u6267\u884C\u5C06\u8FD4\u56DE\u7B2C\u4E00\u6B21\u6267\u884C\u7684\u503C\u3002\u53EF\u8FDB\u884C clear \u6062\u590D\u521D\u59CB\u72B6\u6001\u3002</li><li>\u7B49\u5F85\u671F\u95F4\u518D\u6B21\u8C03\u7528\u4F1A\u7ED9\u4E0A\u4E00\u6B21\u8C03\u7528\u629B\u9519\uFF0C\u53EA\u6709\u6700\u540E\u4E00\u6B21\u8C03\u7528\u751F\u6548</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> OncePromise <span class="token keyword">from</span> <span class="token string">&#39;@/utils/once-promise&#39;</span>

<span class="token keyword">const</span> oncePromise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OncePromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6B64\u5904\u53EA\u4F1A\u6267\u884C\u4E00\u6B21</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6A21\u62DF\u5F02\u6B65</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u67D0\u91CD\u590D\u8C03\u7528\u51FD\u6570</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u91CD\u590D\u8C03\u7528\u5C06\u8FD4\u56DE\u7B2C\u4E00\u6B21\u6267\u884C\u7684\u503C</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token keyword">await</span> oncePromise<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// do something...</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6E05\u7406\u6062\u590D\u521D\u59CB</span>
oncePromise<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="oncepromisequeue" tabindex="-1"><a class="header-anchor" href="#oncepromisequeue" aria-hidden="true">#</a> OncePromiseQueue</h2><p>\u7B49\u5F85\u671F\u95F4\u518D\u6B21\u8C03\u7528\u4F1A\u4EA7\u751F\u961F\u5217\uFF0C\u52A0\u8F7D\u597D\u540E\u4F9D\u6B21\u5168\u90E8\u8C03\u7528</p>`,8),p=[c];function o(i,l){return s(),a("div",null,p)}var d=n(t,[["render",o],["__file","once.html.vue"]]);export{d as default};
